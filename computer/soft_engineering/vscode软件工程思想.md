关于vscode

## 项目背景
vscode本身是microsoft内部开发、使用的编辑器，后期开源。开源的目的：
- 提升影响力。自从Richard Stallman提出GNU协议之后，开源的力量得到了蓬勃发展。开源的基础工具基本成为了众多互联网、计算机公司的基础设施。然而早期的微软在开软社区的口碑简直烂到掉渣：系统垄断、价格打压、软件捆绑，设置一GPL会威胁软件生态系统游说政府抵制GNU/GPL。但是，自纳德拉掌舵微软，其云服务、开源产品的形象开始产生极大的转变，在程序员人群的形象有了很大的好转。
- 赚钱。开源并不一定亏钱。vs code的主要竞争对手atom、ide这些基本都是通过付费服务来赚钱。而以微软的体量来说，这些钱只能说九牛一毛，只要能够垄断操作系统这个千亿级的市场，基本就能立于不败之地。那为啥不把工具放出来，和这些公司练一下肌肉，还能在社区推动、贡献下改善产品，从而推动其配套应用的推广、销售：Axure等

## 项目原则
在vscode的仓库里，我看到的有一点比较有趣的就是它的开发原则或者说是主旨：
- Become the best editor out there for anyone who relies on accessibility features.：成为对任何人都是功能易用的最好的编辑器
- performance, scalability, serviceability, security：性能，可伸缩性，可维护性，安全性
- tackle some of the most wanted user features：提供大部分人都需要的功能
- polishing and a constant slow trickle of design refreshments：持续的细微设计优化、改进
- incrementally improve already existing features：不断优化已有的功能
- responsibly enable extensions that have broader extensibility requirements：提供具有更广泛可扩展性的要求的扩展


比较喜欢的两点就是：1、提供大部分人都需要的功能；2、持续的细微设计优化、改进

在工作中，经常会收到一些使用频次低、收益低的功能需求。对于这一类的需求，无论时间是否允许，我的个人想法都是能拒绝就拒绝：公司付我工资是为了赚钱，不是为了得到一个完美的系统，所有业务需求都应该以投入产出比进行衡量。

在需求过多的情况下，就比较难以进行“持续的细微设计优化、改进”，只能在做需求的时候，看到一个坑就填一个坑（当然自己也有可能挖坑，这就需要能够提升自己的挖坑能力了）。

## 需求规范
vscode有一点感觉还是不错的：
- 问题通过issue来管理，基于issue来提炼出需求。
- 需求的状态：vscode 的工作状态有四个：
    - work not started
    - work completed
    - on-going work
    - stretch goal：可选的功能？


我们现在的需求基本都是某个业务提出给产品经理来审核，然后提交给开发来干活。也就是说，没有大家都来讨论的一个过程。

## 编程规范
vscode编程的规范还是挺不错的：
- 编码命名规范（有时在项目中会见到一些命名为help的函数，且没有注释）
- 注释规范（一些实现、业务逻辑较为复杂的代码，都必须要加上注释：说明输入、输出是啥，中间的处理流程等等。对于弱类型语言，还要说明其类型）
- 项目组内部约束：使用同一的代码风格：字符串用单引号还是双引号？

有的大佬说：“好的代码不需要注释，见码知义”。但是，写得的人、后续维护的人都未必有这么强的代码、业务理解能力。

所以，私以为注释不可缺少。（代码的阅读耗时远长于其编写耗时）

## 测试规范
vs code给我最深的印象之一就是它的测试。vs code没有专门的测试团队。除了开发，就是inbox tracker（负责收集、验证、跟踪bug）和endgame master（组织管理迭代内的测试和发布）。

vs code测试未必是最完善的，但是，以我拙劣的经验看来，大部分项目代码的测试都远远比不上vs code。

- 开发测试
    - 单元测试
    - 集成测试
    - 冒烟测试
    - release后的beta/alpa测试、灰度测试等

网盟这边的测试主要就是单元测试和集成测试。但相对来说还是有很大的进步空间的。


## 总结
### 项目、需求
- 明确项目、需求背景，完善项目文档
- 评审流程
    - 不做个性化需求
    - 需求应以投入产出比衡量、排序
- 需求文档：
    - 一个需求应该经过多人评审
    - jira上的需求要有：背景、需求、方案、验收标准等，缺一可
    - 每个项目、系统都应该有功能文档和历史记录，方便业务查询

### 原则
- 明确业务背景，以业务核心构建系统。任何与业务核心不一致的需求、功能都不应该做
- 不以需求量来作为工作量标准。当然，这个可能比较难......
- 思考远比实现重要

### 文档化
每个服务的文档都应包含如下内容：
- 服务背景、功能
- 服务主要架构或者逻辑
- 服务依赖
- 服务构建、部署方法

对于library/pacakge，需要提供：
- 功能介绍
- 使用文档、使用样例
- 注意事项

### 测试
- 单元测试：
    - 单元测试很好的阐释了代码的功能、输入输出、使用方法等
    - 个人十分推荐测试先行，因为在思考测试、编写测试代码的过程，整个项目的架构、实现逻辑会在你脑中更为清晰，功能代码也能具备更加优秀的可测试性
- 集成测试：
    - 现在的ci等工具都比较完善，学习、使用成本还是比较低的
- 冒烟、回归、灰度测试等

你所写的每行测试代码，都将减少自己、他人后续数年的采坑、故障报告数量。防微杜渐，而非扶大厦于将倾。

### 代码原则
- 按功能粒度、业务粒度分割代码，拒绝长篇著作
- 完善测试：能测试而不测试，实乃羞耻
- 同一风格
- code review要严格，不要怕影响同事关系